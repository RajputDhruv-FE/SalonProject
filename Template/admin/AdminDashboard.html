{% load static %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Admin Dashboard - HairHarmony</title>
    <!-- Google Fonts -->
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <!-- Font Awesome -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"
    />

    <style>
      @import url("https://fonts.googleapis.com/css2?family=Ephesis&display=swap");

      .logo-title {
        font-family: "Ephesis", serif;
        font-weight: 400;
        font-style: normal;
        font-size: 2.5rem;
      }
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: "Poppins", sans-serif;
      }

      :root {
        --primary-color: #d4af37;
        --secondary-color: #fff;
        --sidebar-width: 250px;
        --header-height: 60px;
      }

      body {
        background-color: #121212;
        min-height: 100vh;
      }
      i {
        color: var(--primary-color);
      }

      /* Sidebar Styles */
      .sidebar {
        position: fixed;
        left: 0;
        top: 0;
        bottom: 0;
        width: var(--sidebar-width);
        background-color: #1a1a1a;
        box-shadow: 2px 0 10px rgba(0, 0, 0, 0.3);
        z-index: 1000;
        transition: all 0.3s ease;
      }

      .sidebar-header {
        padding: 20px;
        text-align: center;
        border-bottom: 1px solid #eee;
      }

      .sidebar-header h2 {
        color: var(--primary-color);
        /* font-size: 1.5rem; */
      }

      .sidebar-menu {
        padding: 20px 0;
      }

      .menu-item {
        padding: 12px 25px;
        display: flex;
        align-items: center;
        color: #fff;
        text-decoration: none;
        transition: all 0.3s ease;
      }

      .menu-item:hover {
        background-color: #2a2a2a;
        color: var(--primary-color);
      }

      .menu-item.active {
        background-color: #2a2a2a;
        color: var(--primary-color);
        border-left: 4px solid var(--primary-color);
      }

      .menu-item i {
        margin-right: 10px;
        width: 20px;
        text-align: center;
      }

      /* Main Content Area */
      .main-content {
        margin-left: var(--sidebar-width);
        padding: 20px;
      }

      /* Header */
      .header {
        background-color: #1a1a1a;
        height: var(--header-height);
        padding: 0 20px;
        display: flex;
        align-items: center;
        justify-content: space-between;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        margin-bottom: 20px;
      }

      .header-title {
        font-size: 1.2rem;
        color: #fff;
      }

      .user-menu {
        display: flex;
        align-items: center;
        gap: 20px;
      }

      /* Dashboard Cards */
      .dashboard-cards {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 20px;
        margin-bottom: 30px;
      }

      .card {
        background-color: #1a1a1a;
        border-radius: 10px;
        padding: 20px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        color: #fff;
      }

      .stat-card {
        display: flex;
        align-items: center;
        justify-content: space-between;
      }

      .stat-info h3 {
        font-size: 1.8rem;
        color: #fff;
        margin-bottom: 5px;
      }

      .stat-info p {
        color: #aaa;
        font-size: 0.9rem;
      }

      .stat-icon {
        width: 50px;
        height: 50px;
        border-radius: 10px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.5rem;
      }

      .stat-icon.purple {
        background-color: #2a2a2a;
        color: #d4af37;
      }
      .stat-icon.pink {
        background-color: #2a2a2a;
        color: #c5a028;
      }
      .stat-icon.blue {
        background-color: #2a2a2a;
        color: #d4af37;
      }
      .stat-icon.green {
        background-color: #2a2a2a;
        color: #c5a028;
      }

      /* Recent Activity Section */
      .recent-activity {
        color: var(--secondary-color);
        background-color: #1a1a1a;
        border-radius: 10px;
        padding: 20px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      }

      .section-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
      }

      .activity-list {
        list-style: none;
      }

      .activity-item {
        display: flex;
        align-items: center;
        padding: 15px 0;
        border-bottom: 1px solid #2a2a2a;
      }

      .activity-item:last-child {
        border-bottom: none;
      }

      .activity-icon {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        margin-right: 15px;
        background-color: #2a2a2a !important;
      }

      .activity-details h4 {
        color: #fff;
        margin-bottom: 5px;
      }

      .activity-details p {
        color: #aaa;
        font-size: 0.9rem;
      }

      .activity-details small {
        color: #888;
      }

      /* Action Buttons */
      .btn {
        padding: 8px 15px;
        border-radius: 5px;
        border: none;
        cursor: pointer;
        font-size: 0.9rem;
        transition: all 0.3s ease;
      }

      .btn-primary {
        background-color: var(--primary-color);
        color: white;
      }

      .btn-primary:hover {
        background-color: #c5a028;
      }

      /* Responsive Design */
      @media (max-width: 768px) {
        .sidebar {
          transform: translateX(-100%);
        }

        .main-content {
          margin-left: 0;
        }

        .sidebar.active {
          transform: translateX(0);
        }
      }

      /* Update activity icons to match theme */
      .activity-item .activity-icon {
        background-color: #2a2a2a !important;
      }

      .activity-item .fas {
        color: #d4af37 !important;
      }

      .logout-link {
        color: var(--primary-color);
        text-decoration: none;
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
      }

      .logout-link i {
        font-size: 1.2rem;
      }

      .logout-link:hover {
        color: #c5a028;
        transform: translateY(-2px);
      }

      /* Optional: Add tooltip on hover */
      .logout-link {
        position: relative;
      }

      .logout-link:hover::after {
        content: "Logout";
        position: absolute;
        bottom: -25px;
        left: 50%;
        transform: translateX(-50%);
        background-color: #1a1a1a;
        color: var(--primary-color);
        padding: 5px 10px;
        border-radius: 5px;
        font-size: 0.8rem;
        white-space: nowrap;
      }
      .reason-field{
        
        font-size: 1.2rem;
        padding: 0.5rem;
      }
      .reject-radio:checked + .reason-container{
        display: flex;
        flex-direction: column;
        align-items: flex-start;
        justify-content: center;
        gap: 10px;

      }
      .reason-container{
        display: none;
        margin: 1rem 0;
      
      }

      /* Add these new styles for the salon requests table */
      
    </style>
   
     <link rel="stylesheet" href="{% static 'assets/css/AdminDashboard.css' %}" />
  </head>
  <body>
    <!-- Sidebar -->
    <div class="sidebar">
      <div class="sidebar-header">
        <h2 class="logo-title">HairHarmony</h2>
      </div>
      <div class="sidebar-menu">
        <a href="{% url 'AdminDashboard' %}" class="menu-item active">
          <i class="fas fa-tachometer-alt"></i>
          Dashboard
        </a>
        <a href="{% url 'CityTrans' %}" class="menu-item">
          <i class="fas fa-city"></i>
          Manage Cities
        </a>
        <a href="{% url 'AreaTrans' %}" class="menu-item">
          <i class="fas fa-map-marker-alt"></i>
          Manage Areas
        </a>
        <a href="{% url 'ServiceTrans' %}" class="menu-item">
          <i class="fas fa-store"></i>
          Manage Salon Services
        </a>
        <a href="{% url 'ChangePassword' %}" class="menu-item">
          <i class="fas fa-sign-out-alt"></i>
          Change Password
        </a>
        <a href="{% url 'Logout' %}" class="menu-item">
          <i class="fas fa-sign-out-alt"></i>
          Logout
        </a>
      </div>
    </div>

    <!-- Main Content -->
    <div class="main-content">
      <!-- Header -->
      <div class="header">
        <div class="header-title">
          <i class="fas fa-bars menu-toggle"></i>
          Dashboard Overview
        </div>
        <div class="user-menu">
          <i class="fas fa-bell"></i>
          <i class="fas fa-user-circle"></i>
          <a href="{% url 'Logout' %}" class="logout-link" title="Logout">
            <i class="fas fa-sign-out-alt"></i>
          </a>
        </div>
      </div>

      <!-- Dashboard Cards -->
      <div class="dashboard-cards">
        <div class="card stat-card">
          <div class="stat-info">
            <h3>{{ salonrequest|length }}</h3>
            <p>Total Salons</p>
          </div>
          <div class="stat-icon purple">
            <i class="fas fa-store"></i>
          </div>
        </div>

        <div class="card stat-card">
          <div class="stat-info">
            <h3>{{ users|length }}</h3>
            <p>Active Users</p>
          </div>
          <div class="stat-icon pink">
            <i class="fas fa-users"></i>
          </div>
        </div>

        <div class="card stat-card">
          <div class="stat-info">
            <h3>{{bookings|length}}</h3>
            <p>Bookings Today</p>
          </div>
          <div class="stat-icon blue">
            <i class="fas fa-calendar-check"></i>
          </div>
        </div>

        
      </div>

      <!-- Add the salon requests section -->
      <div class="salon-requests">
        <h3 class="request-header">Salon Requests</h3>
        <table class="request-table">
          <thead>
            <tr>
              <th>Owner Name</th>
              <th>Username</th>
              <th>Email</th>
              <th>Phone Number</th>
              <th>Status</th>
              <th>Action</th>
            </tr>
          </thead>
          <tbody>
            {% for request in salonrequest %}
            <tr>
              <td>{{ request.Name }}</td>
              <td>{{ request.UserName }}</td>
              <td>{{ request.Email }}</td>
              <td>{{ request.PhoneNumber }}</td>
              <td>
                <span class="status-badge {% if request.Status == 'verified' %}verified{% else %}pending{% endif %}">
                  {% if request.Status == 'verified' %}Verified{% else %}Pending{% endif %}
                </span>
              </td>
              <td>
                {% if not request.is_verified %}
                <form action="{% url 'UpdateSalonStatus' request.id %}" method="POST" class="verify-form">
                  {% csrf_token %}
                  <input type="radio" name="status" value="verified">Verify
                  <input type="radio" name="status" value="rejected" class="reject-radio">Reject
                  <div class="reason-container"><span>Write The Reason Here:</span><textarea name="reason" placeholder="Write the Reason Here" id="" class="reason-field"></textarea></div>
                  <button type="submit" class="verify-btn">Submit</button>
                </form>
                {% endif %}
              </td>
            </tr>
            {% empty %}
            <tr>
              <td colspan="6" class="no-requests">No pending salon requests</td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>

    <!-- Add JavaScript for mobile menu toggle -->
    <script>
      document.querySelector('.menu-toggle').addEventListener('click', function() {
        document.querySelector('.sidebar').classList.toggle('active');
      });

      // Close sidebar when clicking outside
      document.addEventListener('click', function(e) {
        const sidebar = document.querySelector('.sidebar');
        const menuToggle = document.querySelector('.menu-toggle');
        
        if (!sidebar.contains(e.target) && !menuToggle.contains(e.target) && sidebar.classList.contains('active')) {
          sidebar.classList.remove('active');
        }
      });
    </script>
  </body>
</html>
